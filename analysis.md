# Analysis of Aave V2 Wallet Credit Scores

This document presents an in-depth analysis of the credit scores assigned to Aave V2 user wallets. The scores, ranging from 0 to 1000, are generated by a heuristic model based on their historical transaction behavior within the protocol. This analysis aims to shed light on the distribution of these scores and characterize the typical behavior patterns of wallets across different score ranges.

## 1. Score Distribution Overview

Understanding the distribution of assigned credit scores is crucial for grasping the overall behavioral landscape of Aave V2 users within the dataset.

**Graph to Include:**
* **Histogram/KDE Plot of Wallet Credit Scores (0-1000):** This visualizes the frequency of wallets across the entire score spectrum.
    * **How to generate (from Jupyter Notebook):**
        <details>
        <summary>Python Code</summary>
        <pre><code>import matplotlib.pyplot as plt
        import seaborn as sns
        # 'scored_df' is the DataFrame containing 'wallet' and 'score' after running the scorer.
        # It's generated by the `score_wallets` function in `aave_wallet_scorer.py`.

        plt.figure(figsize=(12, 6))
        sns.histplot(scored_df['score'], bins=20, kde=True, edgecolor='black')
        plt.title('Distribution of Wallet Credit Scores')
        plt.xlabel('Credit Score (0-1000)')
        plt.ylabel('Number of Wallets')
        plt.grid(axis='y', linestyle='--', alpha=0.7)
        plt.show()
        </code></pre>
        </details>

**Key Findings on Distribution:**

* **Shape:** Typically, the distribution will likely be **skewed towards the lower to middle ranges**. This suggests that a large number of wallets exhibit moderate activity or engagement, while fewer wallets achieve exceptionally high scores (indicating very responsible, long-term, high-volume use) or very low scores (indicating minimal or problematic use).
* **Concentration:** You might observe a peak in the 400-600 range, representing the "average" or "typical" user profile.
* **Tail Ends:** The tails of the distribution (scores near 0 and scores near 1000) will be thinner, signifying the rarity of extremely inactive/risky or exceptionally responsible wallets, respectively.

**Score Distribution Across Ranges (e.g., 0-100, 100-200, ... 900-1000):**

To analyze the distribution across specific 100-point ranges, you can group the scores:

* **How to generate (from Jupyter Notebook):**
    <details>
    <summary>Python Code</summary>
    <pre><code>import pandas as pd
    # 'scored_df' as above
    bins = range(0, 1001, 100) # Define bins from 0 to 1000 in steps of 100
    score_ranges = pd.cut(scored_df['score'], bins=bins, right=False, include_lowest=True, labels=[f'{i}-{i+99}' for i in range(0, 1000, 100)])
    score_distribution_by_range = score_ranges.value_counts().sort_index()

    print("\nWallet Count per Score Range:")
    print(score_distribution_by_range)

    # Optional: Bar plot for ranges
    plt.figure(figsize=(12, 7))
    score_distribution_by_range.plot(kind='bar', color='skyblue', edgecolor='black')
    plt.title('Number of Wallets per Credit Score Range')
    plt.xlabel('Credit Score Range')
    plt.ylabel('Number of Wallets')
    plt.xticks(rotation=45, ha='right')
    plt.grid(axis='y', linestyle='--', alpha=0.7)
    plt.tight_layout()
    plt.show()
    </code></pre>
    </details>

**Expected Findings on Ranges:**

* **0-100:** Likely contains wallets with very few transactions, potentially a single deposit or borrow, or those heavily penalized for liquidations. These are often "dormant" or "one-shot" wallets.
* **100-300:** Wallets with minimal to low activity, perhaps some basic interactions but lacking consistent engagement or diverse actions. They might have slightly higher `std_txn_interval` or low `net_usd_flow`.
* **300-600:** The largest segment, representing average users. They engage moderately, might borrow and repay, but perhaps not with high frequency or volume, or might have somewhat inconsistent patterns.
* **600-800:** Above-average users showing good engagement, consistent activity, and responsible behavior. They have higher `txn_frequency_per_active_day` and `total_usd_volume`.
* **800-1000:** The top tier of wallets. These exhibit strong positive indicators across almost all features: high volume, frequent and consistent interactions, diverse actions, positive net flow, excellent repayment discipline, and no liquidation history.

## 2. Behavior of Wallets in the Lower Score Range (e.g., Scores 0-300)

Wallets in this segment are identified by characteristics that align with minimal engagement, high risk, or erratic/bot-like patterns. To analyze their behavior, you would compare their average feature values to the overall average.

**How to Analyze (from Jupyter Notebook):**
<details>
<summary>Python Code</summary>
<pre><code># 'full_scored_df' is the merged DataFrame containing scores and all original features
# This is created in the Jupyter Notebook by:
# full_scored_df = pd.merge(scored_df, features_df, on='wallet', how='left')

lower_range_wallets = full_scored_df[(full_scored_df['score'] >= 0) & (full_scored_df['score'] <= 300)] # Adjust range as needed
print("\nAverage Features for Lower Scoring Wallets:")
print(lower_range_wallets.drop(columns=['wallet', 'score', 'has_been_liquidated']).mean())
print(f"Mean 'has_been_liquidated' for lower scores: {lower_range_wallets['has_been_liquidated'].mean()}")
</code></pre>
</details>

**Key Findings on Lower-Score Wallet Behavior:**

* **Low Activity Metrics:**
    * **`txn_count` & `active_days`**: Significantly lower than the overall average. Many may have only 1-5 transactions and just a few active days.
    * **`total_usd_volume` & `avg_daily_usd_volume`**: Very low values, indicating minimal financial interaction with the protocol.
* **High Volatility/Risk:**
    * **`std_txn_interval`**: Tends to be higher, reflecting inconsistent or sporadic transaction timing. This could point to highly opportunistic actions or irregular usage patterns.
    * **`has_been_liquidated`**: A considerably higher proportion of these wallets will have experienced a liquidation event (`mean` of this feature will be closer to 1), a direct indicator of poor risk management or failed strategies.
* **Limited/Negative Financial Health:**
    * **`net_usd_flow`**: Often negative or close to zero, suggesting withdrawals exceeding deposits or significant borrowings with little repayment.
    * **`repay_to_borrow_ratio`**: Tends to be very low, indicating a tendency to borrow without sufficient corresponding repayments, or not engaging in repayment cycles at all.
* **Narrow Action Profile:**
    * **`unique_actions`**: Typically low, often just 1 or 2 (e.g., only 'deposit' or only 'borrow'), suggesting a lack of diverse engagement with the protocol's full suite of functionalities.
* **Short Lifespan:**
    * **`wallet_age_days`**: Often lower, implying a short period of activity within the observed dataset.

**Overall Characterization:** These wallets often appear as either transient users who tried the protocol briefly, "dead" wallets, or potentially speculative/risky actors who mismanaged their positions, leading to liquidations. Some could also be simple bot accounts performing very specific, limited functions.

## 3. Behavior of Wallets in the Higher Score Range (e.g., Scores 700-1000)

Conversely, wallets achieving high credit scores demonstrate behavior indicative of reliable, responsible, and highly engaged protocol usage.

**How to Analyze (from Jupyter Notebook):**
<details>
<summary>Python Code</summary>
<pre><code># 'full_scored_df' as above
higher_range_wallets = full_scored_df[(full_scored_df['score'] >= 700) & (full_scored_df['score'] <= 1000)] # Adjust range as needed
print("\nAverage Features for Higher Scoring Wallets:")
print(higher_range_wallets.drop(columns=['wallet', 'score', 'has_been_liquidated']).mean())
print(f"Mean 'has_been_liquidated' for higher scores: {higher_range_wallets['has_been_liquidated'].mean()}")
</code></pre>
</details>

**Key Findings on Higher-Score Wallet Behavior:**

* **High Activity & Volume:**
    * **`txn_count` & `active_days`**: Significantly higher than average, reflecting sustained and frequent interaction over a long period. These are typically the most active and loyal users.
    * **`total_usd_volume` & `avg_daily_usd_volume`**: Substantially high values, reflecting significant financial contributions and consistent large-scale engagement. These are often the "power users" or "whales."
* **Consistent and Predictable Behavior:**
    * **`std_txn_interval`**: Tends to be very low, meaning transactions occur at highly regular or predictable intervals. This suggests well-planned, automated, or diligent human activity.
* **Sound Financial Health / Low Risk:**
    * **`has_been_liquidated`**: A very low or zero proportion of these wallets will have been liquidated, confirming their effective risk management and responsible use of borrowed funds.
    * **`net_usd_flow`**: Strongly positive, indicating they are net liquidity providers or have successfully repaid all their borrowings, contributing positively to the protocol's liquidity.
    * **`repay_to_borrow_ratio`**: High, often significantly greater than 1, showing a strong commitment to managing and reducing their debt obligations responsibly.
* **Diverse Engagement:**
    * **`unique_actions`**: Typically higher, reflecting comprehensive use of Aave's functionalities (deposits, borrows, repays, withdrawals, liquidations *on others*, etc.).
* **Long Lifespan:**
    * **`wallet_age_days`**: Consistently higher, indicating a sustained presence and long-term commitment to the Aave V2 protocol.

## 4. Relationship Between Score and Key Features

The following scatter plots illustrate the relationship between the calculated wallet score and some of the key engineered features:

![Score vs. Features Scatter Plot](download.png)

**Key Observations from Scatter Plots:**

* **Score vs. Total USD Volume:** As the total USD volume of transactions for a wallet increases, there is a general trend of the score also increasing. This aligns with the intuition that more economically active wallets are likely to be more engaged and potentially more reliable users.
* **Score vs. Transaction Frequency (per active day):** Higher transaction frequency per active day appears to correlate with higher scores. Wallets that transact more often, when they are active, tend to be rewarded by the scoring mechanism.
* **Score vs. Std Dev of Transaction Interval:** There is a visible negative trend, indicating that wallets with a lower standard deviation in their transaction intervals (more consistent timing) tend to have higher scores. Conversely, wallets with highly variable transaction intervals often receive lower scores.

These visualizations support the logic of the scoring model, where higher activity, greater economic engagement, and more consistent behavior are associated with higher credit scores.

## 5. Conclusion

The credit scoring model effectively distinguishes between different behavioral patterns of Aave V2 users. Lower scores generally correspond to wallets with minimal activity, higher risk indicators like liquidations, and inconsistent behavior. Higher scores, on the other hand, are achieved by wallets demonstrating substantial, consistent, and responsible engagement with the protocol. This analysis provides valuable insights into the spectrum of user behavior within DeFi lending platforms.
